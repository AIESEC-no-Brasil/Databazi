addons:
  postgresql: 9.6
before_script:
- chmod +x deploy.sh
- cp config/local_env.yml.travis config/local_env.yml
- cp config/database.yml.travis config/database.yml
- psql -c 'create database travis_ci_test;' -U postgres
dist: trusty
language: ruby
rvm:
- 2.5.1
script:
- bundle exec rails db:migrate RAILS_ENV=test
- bundle exec rspec
after_success:
- "./deploy.sh"
env:
  global:
  - secure: BifOZuT0bYI7olqTHW2u6rBiD46PR2m8xFGKdN24IKx4+kRXB73jp7CHpvi9vvU/1qyB0I2XpD0LQhuYJkoEYq3J9gPOxU66Q2WHnrxVWUpJakPo0Yu1hTHCQWFBZ+RsNfQGm0FL4rystPJlF/+r+cM8wYnY+IKt3yUBucz2BA4gVGNS5lLoux4S27+ESBZ1QGRseBuBxFB4naUnD9TKXaVJgzE8FAGqEh4eC5L5ud0uTHxQS4xpoROHQNKPQImqEjHkr5zBxl941qJiEurLxSWst5qUeQy6YtvyHzXioNevDDGJwLvAsxkb8niFKb8LOMrMKYsMLyVdw6Hk534MGMOVcXSyXv3zzxCAw+ftShJGuQbk1BDesXu+rG5SuBefI+ksVgjKNcbqo74WXRdcmbpr5hDwUZOz1VXTm3EuOyX9U6h61jf0g+blDMm7NrjCYkFLPqaqUDGZ0WCTlHi1eal4RrVpGciSWgd5emwe3ruGOTRothSyAdDuWpLhSf7qkTqzVdnUGrh5TKq3/UIpe42MmZAwV6Hxt7xkh4aOzLEntFnL+CaocbMs29KNtTxUDI4RpLzQDCfhQugRQw9QlkZPS+eiZaTIqW794icWtH/hF9s5Ga55fHoXXb1k7Txp4VR5/dXk7Q6OmTOt5Qsm/2e8nLxLw0bEGZrZKnZo3qI=
  - secure: LuofttkcySWqH3eU0bweMgVxPSvud+ViLflD0hTaFu1kixgDlvV/dQbbtU8GkxH9AYv8jlBmats085Xun+gEUH2fhIngObYWTFG+mLR5IBCkyl5lcIWwk/6jV2VJn3cssBlhCpQFLjAnqBQ7+Zg3eWHmC3YblLvAsT3k9dPwm8hO1VHmHKTzZAKX3m4FOEARouXM217pr+PlzyurQNt/BF9wxzaAef5ufj1BjcYyFm2Ao9krz530oZEcpabQIPuWGsrUI8wqWsh3yUNODDzRpsRdN7fSQ43pGDKWg36055xunJY3sDcQGXnUdzItPfqlTXlWv7xV0cyA6jRyuHimc+yGg/nP75tBwtQ4qgd1TLCwlgKA1BMf1NXcC3WOgSNxrcUjL+WavTlznv0TfZp55X4jFsRG4LFyT5XetKx0oCEhCra1WYREsCXlAcvLqdAj3SRBbcXwFrUGvpo4bamo3vz0InGzUr7w1mpnb4/rd9SDAOBJplZbL73MMlDidO9Is0PX63e/enqQhNqtJ1sO93dRsvFDW4acqr81dKny1z4qYFBGYrEcCceP9KQSzqYAiPcEZRi/fP1wvW7trd/OrMv5LxYtWGHw1AqD86bSPedMwyE135vdAea46qQF+RxVLmnobVXiiTPGDbf2UXIOmSKoyocMlN/aCDd/DfcwU4o=
  - secure: vb7W+IqF1s7t7UTXeZHgqCnkzCr2G8LXbCIpq0a23T8QwOPv5kbOpmvtmzqKXsHF8ymXhJdD7tBPSzWkquj5gmLT6Z6dAbbiac+HBRF9s3IY18DdVHpT4MGHc5ACIEi+dFIoWYhz3PH601maYy9jhN8W1bxa3qVFtwNsPfPMp+HKTGxJs8/G7mEQdT+MXdLQbn1uC0OXM3AzGBz2PccAOvRhr/LmBeVO6tjwmkJveqNwe0ncv17aWlWugb5bWVtVhj83hRaspH6wzgHmLWdp/OHNRlD31bn2LhvS1dKLC+YOPiiDABZdBUfFaaKGORdRMEjVn2hoUQ+k0ESl1k4TH4zMv+9j/oLpr5KUSYTcTUXYZu/1wSzi2ukKOrOPTlj6kKsUpmrxKg+lTFtuLTQ7nfNEvI8mikX6WNFW1dN215BswX0FoqKBVpMlsCQgBtzF1dxhJfGT/eZjjPmj1GKVqhbjdgLc+2UIIGurBjLAF6MQVT0IQ4G8ekrrH8/rLSkwgrMGfyKDfup3ZEF95quNqReL9s9mieW6vcjp4E9wOrSXLgmQXwwEkJAEpGuNyQulY9ZlMop5TSvp3U+vpN+rTGosbQ2rtbjDpSMMf7vcT/oTOESyvBOSfTJv5sEcwAjnB/hKnLx+Po2VMGPJCA6CcdbDitMd3elI/w1zISZ6ybo=
  - secure: KdhWDsPbiX79LIwk5zAc6AJwHw+Sw0md+0uI9aUrWfTrtkQxkPgH00ttHK1NjzAcd5MhLGq92VIENfk5cnJa6VFuan4geJx12WwZ8Ca+7lEyES48LKj2y2W+xNvm1e+gjWLMDsaCI8JIg6O+t0n/qdrcXHXhp3hZPdWFMRqMOzhS/XdouJ0PykX+FFQBPn4acd/x7GK84CufFmx/mFxIJh3/iaMgkNtbi0837/CIlUcse04hS2tJKUMZlHGvuRPwNTxeABPNQtwbHKT1+/vvrczqrHed1HswZbc+plr4xA/IiiUWkWEZSxDmdMnD3bXE0iQqoZ0brRlLjZjwz8llgBJeP6LcMs/d6b2IJL/jAm7g3og0GI9Kg2HPcfZd9+yqOyU1hOmIX6Kqkvo1wV3NqqrfBg8oCijwlHBqGcJwjNSqfMre9Sq4+XiZ/bI/Hr0u3O0X+Qw8nxPorIfiHDk0RExtpl+X51royCthV5X1ng7NgiLsLcIZB+ACgOsAK62hnLBS/cebrIQVq2z4oHn6XHxjB3HHrR5HJq8qk4Ak7WvPLw5i2nrcE4Kt4d88OQUV0s0w5tyJVKLlBsECili1RxBxDMgE5v88LAJPHaAnDWudPK2NnKNIcpu0f0eWOyaeLQiBNpQrc7bzrV7gzvl0zzslWoCZK4rc3bLlnEoWmWA=
