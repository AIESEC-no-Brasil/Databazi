addons:
  postgresql: 9.6
before_script:
- chmod +x deploy.sh
- cp config/local_env.yml.travis config/local_env.yml
- cp config/database.yml.travis config/database.yml
- psql -c 'create database travis_ci_test;' -U postgres
dist: trusty
language: ruby
rvm:
- 2.5.1
script:
- bundle exec rails db:migrate RAILS_ENV=test
- bundle exec rspec
after_success:
- "./deploy.sh"
env:
  global:
    secure: BifOZuT0bYI7olqTHW2u6rBiD46PR2m8xFGKdN24IKx4+kRXB73jp7CHpvi9vvU/1qyB0I2XpD0LQhuYJkoEYq3J9gPOxU66Q2WHnrxVWUpJakPo0Yu1hTHCQWFBZ+RsNfQGm0FL4rystPJlF/+r+cM8wYnY+IKt3yUBucz2BA4gVGNS5lLoux4S27+ESBZ1QGRseBuBxFB4naUnD9TKXaVJgzE8FAGqEh4eC5L5ud0uTHxQS4xpoROHQNKPQImqEjHkr5zBxl941qJiEurLxSWst5qUeQy6YtvyHzXioNevDDGJwLvAsxkb8niFKb8LOMrMKYsMLyVdw6Hk534MGMOVcXSyXv3zzxCAw+ftShJGuQbk1BDesXu+rG5SuBefI+ksVgjKNcbqo74WXRdcmbpr5hDwUZOz1VXTm3EuOyX9U6h61jf0g+blDMm7NrjCYkFLPqaqUDGZ0WCTlHi1eal4RrVpGciSWgd5emwe3ruGOTRothSyAdDuWpLhSf7qkTqzVdnUGrh5TKq3/UIpe42MmZAwV6Hxt7xkh4aOzLEntFnL+CaocbMs29KNtTxUDI4RpLzQDCfhQugRQw9QlkZPS+eiZaTIqW794icWtH/hF9s5Ga55fHoXXb1k7Txp4VR5/dXk7Q6OmTOt5Qsm/2e8nLxLw0bEGZrZKnZo3qI=
  matrix:
  - secure: ZBKFPIWu5A+knx4UaPsfDAcYgGRphLzshkPyiC9Cz93Ma9TOlJyf8whpxqQK4kY081NMU/5KG1R0a3mhqFE+j8MOTyEN5DHGw7bU5MbtTfdzyJh44A1EtEgtsaQQP01CLkSC1ev5weVKFHwOcIuGA8sNfplewwThHWxDufHl6upx1WVg447scj3MMmplzEzz2Cqg6x6ONt+DcxZ8P1DurdZH8d0xoX9rOr5oYxIXH0cPBnsm2xujQbcJrjC0BD9zsCeZjOwYj5PckHoE3UHpyKREXeOnVnWq745xsI4pKCGyPrVkrczIdDtTWZtoqpNIskuo/9Gq7JmysvpFx0QEhteJ286F+fXZv4FMIS5Ho1DxIMAEt6CGUQVQ7LGNdgQ7XQLEVUQvtIbaJQ7yZlhldd5K8siuAV0vYo5P9l9FH02EELnPByEm3qtt83wy7A35al4imgz7xvAazb4pzDe+l3B3EBjN9HZK/rkIj9QK6GEORkAi03P1Pq992vlKNC62ow+y1zVAoCTV886pfcUgszC7MedYjhwZwcjB+6CdeDQlznlYEZhHhZnu7r4oXGwiXyhMErX9a60xDxVsbjUHXDMaJ5uqW9qWDXGIgLCl1kLtoKG/aS65HG0phtVifDoxA8L6T2ZGqW41YAMTk9AT9QkWL0DD+GNJWGvHR29bW8A=
  - secure: T8BF3/u3u7vogpLsUadYI2Q6q1vhGL5mOrapxV/HwFs4nZyZHhOwvr+5N3z5jTGQT1LgAKf2HLGUqcj8IetSgvfCcQlG/4NSNNM99ilGg4BtMvEAzMRcAoUxQ5EEysK8+uf4K0QcoTSN4JsxlleEW7Odn5vkOFeuZSiwfXTg1bgGBLKjYSm+FxmpBHUkBp+4kybYcrMKB//A8kq11LR3NP6BsgNEjtzNsRR49KsjTB76ui4MJM1Ga9HjoJL3jLIndQhm0vYRdoIHZ2s2pJcKZ0JGsAqKSmk4x963NMNJMxCVs+kW6AbUOBsuOBwZMzN02GvmNYwm0nJ5dVjMV/PVvJt21ywgFkBLld+G1ebCI6sUiYjzm5mmaVeahCFJcSFvfhStWqlcMoU78DG8fgdKW/CfebFL95oSd3jOyypfJSELqCVxP4CKnDYq3iZm6s+sonQTcd11+CmzxbcemLaEvyGdWIMFj9/7ebduaBWL9vsYF0Ia9YYVLMa+LZMBYA6ddB3c0vleNhgYsOAxHfMp63dVjwX4r6DsI4Vp68nv+yFWa/6vU9nof6eO7VQSYsQjRgzpG78vEIQFDBgeEM7UuPUHz2EL9jYVF/GBQfBz8le0g6ZwT+dYUNbDcFuj4AO9oMJdSAh6kFI2DzJP+NluVFCgV0mq1zg6Jd6qlGgrCDc=
  - secure: N6EkTfGM09OAOfrtxUhBXD3fDgNRvU/Z+PKq6ClfGqydSaJpwA1GjI82e6qC5f907IxiGzZTxu56d3sL4806lJqAfy7xq+T0GnxokYpH2mwX5o93tV33eB+kbqrj8KltlFQBbf6/S6sJt8JcQFXyTeOWMyuI+hH6QE23zprWt5/ROls67qCV8Q1nX2k4Iz+YnGE2AvgdxPuJInKcKfX/d0v7ApQEXrE8TRV3Xh1JCVYXsfFLRb/R/76YvaIdvCNWrhFMiM9U2o1A6Bv25fzVefe6Fk2rV7v7N1NQ1S47bpyoEtCDg0/6VwPme7r4IlaHvtwChGr7GhtxCIDEa9keDE4/jZvSwdp8XrfT685HTzgAnIkL+PW3eQWRTPeQXAvwzStuhtUbdGJ2Ek4WH6ZwedCir+TfRClHnK+oIfgv3E8ZRQi2UQODVQrv/yJaYLKkEjj0OtWmfz/exX1w+rVF0BmACAVPIQmaqhLFIq4W8PcDbakNQgao0hX1+5fG6e3CGfxkHpRVLAp3Zml+VxR6Vv5lQcJ5rO+rKkFWmH8MAIJlS7AgKXLTf+iOPFzJpR/fXul30Er75zLGMwdY65+6tUszQMwPYYQJmL5dq4luIFot3xw3loIzFqsysYlwYDTOmObid4io2PBg+8o93OV22squK315b6qmumZAoZwwcLs=
